{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:39:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Hi","platform":"telegram","timestamp":"16:39:13","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"New user created","platform":"telegram","timestamp":"16:39:21","userId":"cmdon7r910000ybkm39izzjba"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"16:39:21"}
{"error":"AI processing failed: 401 Incorrect API key provided: sk-your-***********here. You can find your API key at https://platform.openai.com/account/api-keys.","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: 401 Incorrect API key provided: sk-your-***********here. You can find your API key at https://platform.openai.com/account/api-keys.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:22:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:39:22"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"16:39:22","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"16:39:22","userId":"cmdon7r9"}
{"error":"AI processing failed: 401 Incorrect API key provided: sk-your-***********here. You can find your API key at https://platform.openai.com/account/api-keys.","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: 401 Incorrect API key provided: sk-your-***********here. You can find your API key at https://platform.openai.com/account/api-keys.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:60:32)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:39:23"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"16:39:24","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:45:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Hi","platform":"telegram","timestamp":"16:45:31","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"16:45:34"}
{"error":"AI processing failed: 404 The model `gpt-4` does not exist or you do not have access to it.","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: 404 The model `gpt-4` does not exist or you do not have access to it.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:22:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:45:36"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"16:45:36","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"16:45:36","userId":"cmdon7r9"}
{"error":"AI processing failed: 404 The model `gpt-4` does not exist or you do not have access to it.","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: 404 The model `gpt-4` does not exist or you do not have access to it.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:60:32)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:45:36"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"16:45:37","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:46:56"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Hi","platform":"telegram","timestamp":"16:46:56","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"16:46:58"}
{"error":"AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:22:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:47:03"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"16:47:03","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"16:47:03","userId":"cmdon7r9"}
{"error":"AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:60:32)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:47:06"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"16:47:07","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:50:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Hi","platform":"telegram","timestamp":"16:50:24","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"16:50:26"}
{"error":"AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:22:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:50:31"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"16:50:31","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"16:50:31","userId":"cmdon7r9"}
{"error":"AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:60:32)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:50:36"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"16:50:37","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:50:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Hi","platform":"telegram","timestamp":"16:50:58","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"16:50:59"}
{"error":"AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:22:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:51:10"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"16:51:10","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"16:51:10","userId":"cmdon7r9"}
{"error":"AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:60:32)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:51:14"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"16:51:16","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:08:59"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Hi","platform":"telegram","timestamp":"17:08:59","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"17:09:04"}
{"error":"AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:22:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:09:08"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"17:09:08","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"17:09:08","userId":"cmdon7r9"}
{"error":"AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:60:32)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:09:11"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"17:09:13","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:24:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"HI","platform":"telegram","timestamp":"17:24:02","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"17:24:08"}
{"error":"AI processing failed: 429 Your account is not active, please check your billing details on our website.","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: 429 Your account is not active, please check your billing details on our website.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:22:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:24:12"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"17:24:12","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"17:24:12","userId":"cmdon7r9"}
{"error":"AI processing failed: 429 Your account is not active, please check your billing details on our website.","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: 429 Your account is not active, please check your billing details on our website.\n    at OpenAIProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at OpenAIProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/openai.ts:38:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:60:32)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:24:16"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"17:24:16","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:42:08"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"18:42:08","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"18:42:17"}
{"error":"Unexpected token O in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"SyntaxError: Unexpected token O in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:23:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:42:19"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"18:42:19","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"18:42:19","userId":"cmdon7r9"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:61:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:42:21"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"18:42:22","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:44:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"18:44:42","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"18:44:43"}
{"error":"Failed to parse AI response: Okay, I understand. I will analyze user messages, detect multiple intents, and return a JSON object with the structure you specified. I will also handle ambiguous messages by setting `needsConfirmation` to `true` and providing a `clarificationQuestion`.\n\nHere's an example of how I will respond to the message \"Hi\":\n\n```json\n{\n  \"intents\": [\n    {\n      \"service\": \"onboarding\",\n      \"action\": \"greet\",\n      \"data\": {},\n      \"confidence\": 0.8\n    }\n  ],\n  \"needsConfirmation\": false\n}\n```\n","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: Failed to parse AI response: Okay, I understand. I will analyze user messages, detect multiple intents, and return a JSON object with the structure you specified. I will also handle ambiguous messages by setting `needsConfirmation` to `true` and providing a `clarificationQuestion`.\n\nHere's an example of how I will respond to the message \"Hi\":\n\n```json\n{\n  \"intents\": [\n    {\n      \"service\": \"onboarding\",\n      \"action\": \"greet\",\n      \"data\": {},\n      \"confidence\": 0.8\n    }\n  ],\n  \"needsConfirmation\": false\n}\n```\n\n    at IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:27:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:44:46"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"18:44:46","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"18:44:46","userId":"cmdon7r9"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:61:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:44:47"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"18:44:48","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:46:35"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"18:46:35","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"18:46:38"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["onboarding"],"timestamp":"18:46:41"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:47:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"i need to onboard first","platform":"telegram","timestamp":"18:47:06","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":23,"timestamp":"18:47:07"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["onboarding"],"timestamp":"18:47:09"}
{"action":"start_onboarding","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"18:47:09","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"18:47:09","userId":"cmdon7r9"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:61:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:47:11"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"18:47:11","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:49:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"18:49:25","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"18:49:27"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:23:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:49:29"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"18:49:29","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"18:49:29","userId":"cmdon7r9"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:61:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:49:31"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"18:49:32","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:56:32"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"18:56:32","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"18:56:33"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:23:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:56:35"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"18:56:35","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"18:56:35","userId":"cmdon7r9"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:25:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:56:36"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"18:56:37","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:57:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"18:57:04","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"18:57:07"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:23:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:57:10"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"18:57:10","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"18:57:10","userId":"cmdon7r9"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:25:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:57:11"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"18:57:13","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:59:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"18:59:11","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"18:59:12"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"18:59:15"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:59:33"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"where am i","platform":"telegram","timestamp":"18:59:33","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":10,"timestamp":"18:59:34"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["onboarding"],"timestamp":"18:59:37"}
{"action":"get_location","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"18:59:37","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"18:59:37","userId":"cmdon7r9"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:25:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:59:38"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"18:59:38","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:00:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"19:00:04","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"19:00:05"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"19:00:08"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:00:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"i am trying to understand what this is","platform":"telegram","timestamp":"19:00:24","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":38,"timestamp":"19:00:27"}
{"intentCount":0,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":[],"timestamp":"19:00:29"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:00:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"whats going on who are you","platform":"telegram","timestamp":"19:00:42","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":26,"timestamp":"19:00:43"}
{"intentCount":0,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":[],"timestamp":"19:00:46"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:04:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"onbording","platform":"telegram","timestamp":"19:04:04","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":9,"timestamp":"19:04:07"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales","finance"],"timestamp":"19:04:10"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:05:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"i wanna create a new sales lead , Black Rose Guest","platform":"telegram","timestamp":"19:05:26","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":72,"timestamp":"19:05:29"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:05:31"}
{"action":"create_lead","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:05:31","userId":"cmdon7r9"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":69,"timestamp":"19:05:32","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:05:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"activate sales","platform":"telegram","timestamp":"19:05:41","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":14,"timestamp":"19:05:42"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:05:45"}
{"action":"activate","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:05:45","userId":"cmdon7r9"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":69,"timestamp":"19:05:45","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:09:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"onborading","platform":"telegram","timestamp":"19:09:17","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":10,"timestamp":"19:09:18"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"19:09:20"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:09:29"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"i want the sales service","platform":"telegram","timestamp":"19:09:29","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":24,"timestamp":"19:09:29"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:24:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:09:32"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"19:09:32","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"19:09:32","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Notification settings updated","settings":{},"timestamp":"19:09:34","userId":"cmdon7r9"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":368,"timestamp":"19:09:34","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:10:39"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"19:10:39","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"19:10:41"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"19:10:43"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:10:52"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"onboarding","platform":"telegram","timestamp":"19:10:52","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":10,"timestamp":"19:10:53"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:24:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:10:56"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"19:10:56","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"19:10:56","userId":"cmdon7r9"}
{"error":"AI processing failed: Cannot read properties of undefined (reading 'trim')","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: Cannot read properties of undefined (reading 'trim')\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:27:54)\n    at MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:53)\n    at MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:49)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:10:56"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"19:10:56","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:11:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"19:11:21","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"19:11:22"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"19:11:26"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:11:35"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"onboarding","platform":"telegram","timestamp":"19:11:35","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":10,"timestamp":"19:11:36"}
{"intentCount":3,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["onboarding","onboarding","onboarding"],"timestamp":"19:11:40"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:11:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"i want add to my services, i want both servies","platform":"telegram","timestamp":"19:11:58","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":46,"timestamp":"19:12:00"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["onboarding","onboarding"],"timestamp":"19:12:02"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:12:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"what services are there","platform":"telegram","timestamp":"19:12:11","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":23,"timestamp":"19:12:12"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales","finance"],"timestamp":"19:12:15"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:12:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"i want both services","platform":"telegram","timestamp":"19:12:26","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":20,"timestamp":"19:12:28"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Intent detection failed","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async IntentDetectionService.detectIntents (webpack-internal:///(rsc)/./src/lib/services/intent-detection.service.ts:24:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:39:36)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:12:30"}
{"action":"help","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"onboarding","timestamp":"19:12:30","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing enhanced onboarding","timestamp":"19:12:30","userId":"cmdon7r9"}
{"error":"AI processing failed: Cannot read properties of undefined (reading 'trim')","level":"\u001b[31merror\u001b[39m","message":"Enhanced onboarding error","stack":"Error: AI processing failed: Cannot read properties of undefined (reading 'trim')\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at OnboardingService.processMessage (webpack-internal:///(rsc)/./src/lib/services/onboarding.service.ts:27:54)\n    at MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:79:53)\n    at MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:49)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:12:30"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":780,"timestamp":"19:12:30","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:12:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"both services","platform":"telegram","timestamp":"19:12:38","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":13,"timestamp":"19:12:42"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"19:12:44"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:12:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"both","platform":"telegram","timestamp":"19:12:49","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":4,"timestamp":"19:12:50"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales","notifications"],"timestamp":"19:12:52"}
{"action":"create_lead","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:12:52","userId":"cmdon7r9"}
{"action":"set_reminder","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"notifications","timestamp":"19:12:53","userId":"cmdon7r9"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":107,"timestamp":"19:12:54","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:13:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"active sales","platform":"telegram","timestamp":"19:13:03","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":12,"timestamp":"19:13:04"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:13:08"}
{"action":"track_pipeline","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:13:08","userId":"cmdon7r9"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":69,"timestamp":"19:13:08","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:13:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"activate sales","platform":"telegram","timestamp":"19:13:15","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":14,"timestamp":"19:13:16"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:13:18"}
{"action":"activate","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:13:18","userId":"cmdon7r9"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":69,"timestamp":"19:13:19","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:15:36"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"19:15:36","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"19:15:37"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"19:15:40"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:16:00"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Add lead John +27821234567","platform":"telegram","timestamp":"19:16:00","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":26,"timestamp":"19:16:01"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:16:03"}
{"action":"add_lead","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:16:03","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"19:16:04","userId":"cmdon7r9"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Sales service error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:26:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:85:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:16:06"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":55,"timestamp":"19:16:07","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:16:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"extractJsonPayload","platform":"telegram","timestamp":"19:16:46","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":18,"timestamp":"19:16:46"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"19:16:49"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:16:59"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Add lead John +27821234567","platform":"telegram","timestamp":"19:16:59","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":26,"timestamp":"19:17:02"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:17:05"}
{"action":"add_lead","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:17:05","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"19:17:05","userId":"cmdon7r9"}
{"error":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"contacted\"\n    ],\n    \"message\": \"Expected boolean, received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"replied\"\n    ],\n    \"message\": \"Expected boolean, received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"interested\"\n    ],\n    \"message\": \"Expected boolean, received null\"\n  },\n  {\n    \"expected\": \"'New' | 'Contacted' | 'Replied' | 'Interested' | 'Waiting' | 'Proposal Sent' | 'Closed - Won' | 'Closed - Lost'\",\n    \"received\": \"null\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"updates\",\n      \"status\"\n    ],\n    \"message\": \"Expected 'New' | 'Contacted' | 'Replied' | 'Interested' | 'Waiting' | 'Proposal Sent' | 'Closed - Won' | 'Closed - Lost', received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"nextStep\"\n    ],\n    \"message\": \"Expected string, received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"nextFollowup\"\n    ],\n    \"message\": \"Expected string, received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"notes\"\n    ],\n    \"message\": \"Expected string, received null\"\n  }\n]","level":"\u001b[31merror\u001b[39m","message":"Sales service error","stack":"ZodError: [\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"contacted\"\n    ],\n    \"message\": \"Expected boolean, received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"replied\"\n    ],\n    \"message\": \"Expected boolean, received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"boolean\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"interested\"\n    ],\n    \"message\": \"Expected boolean, received null\"\n  },\n  {\n    \"expected\": \"'New' | 'Contacted' | 'Replied' | 'Interested' | 'Waiting' | 'Proposal Sent' | 'Closed - Won' | 'Closed - Lost'\",\n    \"received\": \"null\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"updates\",\n      \"status\"\n    ],\n    \"message\": \"Expected 'New' | 'Contacted' | 'Replied' | 'Interested' | 'Waiting' | 'Proposal Sent' | 'Closed - Won' | 'Closed - Lost', received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"nextStep\"\n    ],\n    \"message\": \"Expected string, received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"nextFollowup\"\n    ],\n    \"message\": \"Expected string, received null\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"path\": [\n      \"updates\",\n      \"notes\"\n    ],\n    \"message\": \"Expected string, received null\"\n  }\n]\n    at get error [as error] (webpack-internal:///(rsc)/./node_modules/zod/v3/types.js:134:31)\n    at ZodObject.parse (webpack-internal:///(rsc)/./node_modules/zod/v3/types.js:209:22)\n    at SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:29:95)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:85:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:17:06"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":55,"timestamp":"19:17:07","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:22:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"hi","platform":"telegram","timestamp":"19:22:42","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"19:22:44"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["finance","finance"],"timestamp":"19:22:47"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:22:50"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Add lead John +27821234567","platform":"telegram","timestamp":"19:22:50","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":26,"timestamp":"19:22:52"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:22:56"}
{"action":"addLead","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:22:56","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"19:22:57","userId":"cmdon7r9"}
{"leadId":"cmdot26e90001yzjdzz91u0b2","leadName":"John","level":"\u001b[32minfo\u001b[39m","message":"Lead created","timestamp":"19:22:58"}
{"action":"create","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"19:22:58","userId":"cmdon7r9"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":139,"timestamp":"19:22:59","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:23:18"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"give me a message","platform":"telegram","timestamp":"19:23:18","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":17,"timestamp":"19:23:19"}
{"intentCount":0,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":[],"timestamp":"19:23:21"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:25:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Summary of sales","platform":"telegram","timestamp":"19:25:21","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":16,"timestamp":"19:25:24"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:25:26"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:25:26","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"19:25:26","userId":"cmdon7r9"}
{"error":"Lead \"John Smith\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales service error","stack":"Error: Lead \"John Smith\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:90:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processLeadUpdate (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:50:24)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:31:28)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:85:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:25:28"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":55,"timestamp":"19:25:28","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"19:28:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Summary of sales","platform":"telegram","timestamp":"19:28:46","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":16,"timestamp":"19:28:49"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"19:28:51"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"19:28:51","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"19:28:52","userId":"cmdon7r9"}
{"error":"Lead \"John Doe\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales service error","stack":"Error: Lead \"John Doe\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:90:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processLeadUpdate (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:50:24)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:31:28)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:85:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"19:28:54"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":55,"timestamp":"19:28:54","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"21:08:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Hi","platform":"telegram","timestamp":"21:08:41","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":2,"timestamp":"21:08:48"}
{"intentCount":0,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":[],"timestamp":"21:08:49"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"21:09:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Summary of sales","platform":"telegram","timestamp":"21:09:02","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":16,"timestamp":"21:09:03"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["sales"],"timestamp":"21:09:06"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"sales","timestamp":"21:09:06","userId":"cmdon7r9"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"21:09:07","userId":"cmdon7r9"}
{"error":"Lead \"John Smith\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales service error","stack":"Error: Lead \"John Smith\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:90:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processLeadUpdate (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:50:24)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:31:28)\n    at async MessageRouterService.processIntent (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:85:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:49:38)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"21:09:08"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":55,"timestamp":"21:09:09","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"21:09:29"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Any tasks today","platform":"telegram","timestamp":"21:09:29","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":15,"timestamp":"21:09:30"}
{"intentCount":2,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["notifications","sales"],"timestamp":"21:09:33"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"21:09:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"Reminders","platform":"telegram","timestamp":"21:09:42","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":9,"timestamp":"21:09:43"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["notifications"],"timestamp":"21:09:45"}
{"action":"reminder_settings","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"notifications","timestamp":"21:09:45","userId":"cmdon7r9"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":31,"timestamp":"21:09:46","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"21:10:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing unified message","messagePreview":"I want see my notifications settings","platform":"telegram","timestamp":"21:10:06","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Detecting intents","messageLength":36,"timestamp":"21:10:09"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Intents detected","services":["notifications"],"timestamp":"21:10:11"}
{"action":"view_settings","level":"\u001b[32minfo\u001b[39m","message":"Processing intent","service":"notifications","timestamp":"21:10:11","userId":"cmdon7r9"}
{"intentCount":1,"level":"\u001b[32minfo\u001b[39m","message":"Unified message processed","responseLength":31,"timestamp":"21:10:11","userId":"cmdon7r9"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"07:50:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Hi","platform":"telegram","timestamp":"07:50:14","userId":"69608666"}
{"error":"\nInvalid `prisma.user.create()` invocation:\n\n{\n  data: {\n    platform: \"telegram\",\n    platformId: \"6960866685\",\n    services: \"sales,finance\",\n    isActive: true,\n    isSetupComplete: false,\n    ~~~~~~~~~~~~~~~\n?   id?: String,\n?   name?: String | Null,\n?   phone?: String | Null,\n?   morningNotificationTime?: String | Null,\n?   eveningNotificationTime?: String | Null,\n?   notificationPlatform?: String | Null,\n?   enableMorningNotification?: Boolean,\n?   enableEveningNotification?: Boolean,\n?   timezone?: String | Null,\n?   createdAt?: DateTime,\n?   updatedAt?: DateTime,\n?   leads?: LeadCreateNestedManyWithoutUserInput,\n?   transactions?: TransactionCreateNestedManyWithoutUserInput,\n?   notifications?: NotificationCreateNestedManyWithoutUserInput\n  }\n}\n\nUnknown argument `isSetupComplete`. Available options are marked with ?.","level":"\u001b[31merror\u001b[39m","message":"User service error","stack":"PrismaClientValidationError: \nInvalid `prisma.user.create()` invocation:\n\n{\n  data: {\n    platform: \"telegram\",\n    platformId: \"6960866685\",\n    services: \"sales,finance\",\n    isActive: true,\n    isSetupComplete: false,\n    ~~~~~~~~~~~~~~~\n?   id?: String,\n?   name?: String | Null,\n?   phone?: String | Null,\n?   morningNotificationTime?: String | Null,\n?   eveningNotificationTime?: String | Null,\n?   notificationPlatform?: String | Null,\n?   enableMorningNotification?: Boolean,\n?   enableEveningNotification?: Boolean,\n?   timezone?: String | Null,\n?   createdAt?: DateTime,\n?   updatedAt?: DateTime,\n?   leads?: LeadCreateNestedManyWithoutUserInput,\n?   transactions?: TransactionCreateNestedManyWithoutUserInput,\n?   notifications?: NotificationCreateNestedManyWithoutUserInput\n  }\n}\n\nUnknown argument `isSetupComplete`. Available options are marked with ?.\n    at Dn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at ri.handleRequestError (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:121:7102)\n    at ri.handleAndLogRequestError (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:121:6784)\n    at ri.request (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:121:6491)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async l (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:130:9812)\n    at async UserService.findOrCreateUser (webpack-internal:///(rsc)/./src/lib/services/user.service.ts:21:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:29:26)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"07:50:20"}
{"error":"\nInvalid `prisma.user.create()` invocation:\n\n{\n  data: {\n    platform: \"telegram\",\n    platformId: \"6960866685\",\n    services: \"sales,finance\",\n    isActive: true,\n    isSetupComplete: false,\n    ~~~~~~~~~~~~~~~\n?   id?: String,\n?   name?: String | Null,\n?   phone?: String | Null,\n?   morningNotificationTime?: String | Null,\n?   eveningNotificationTime?: String | Null,\n?   notificationPlatform?: String | Null,\n?   enableMorningNotification?: Boolean,\n?   enableEveningNotification?: Boolean,\n?   timezone?: String | Null,\n?   createdAt?: DateTime,\n?   updatedAt?: DateTime,\n?   leads?: LeadCreateNestedManyWithoutUserInput,\n?   transactions?: TransactionCreateNestedManyWithoutUserInput,\n?   notifications?: NotificationCreateNestedManyWithoutUserInput\n  }\n}\n\nUnknown argument `isSetupComplete`. Available options are marked with ?.","level":"\u001b[31merror\u001b[39m","message":"Message processing failed","stack":"PrismaClientValidationError: \nInvalid `prisma.user.create()` invocation:\n\n{\n  data: {\n    platform: \"telegram\",\n    platformId: \"6960866685\",\n    services: \"sales,finance\",\n    isActive: true,\n    isSetupComplete: false,\n    ~~~~~~~~~~~~~~~\n?   id?: String,\n?   name?: String | Null,\n?   phone?: String | Null,\n?   morningNotificationTime?: String | Null,\n?   eveningNotificationTime?: String | Null,\n?   notificationPlatform?: String | Null,\n?   enableMorningNotification?: Boolean,\n?   enableEveningNotification?: Boolean,\n?   timezone?: String | Null,\n?   createdAt?: DateTime,\n?   updatedAt?: DateTime,\n?   leads?: LeadCreateNestedManyWithoutUserInput,\n?   transactions?: TransactionCreateNestedManyWithoutUserInput,\n?   notifications?: NotificationCreateNestedManyWithoutUserInput\n  }\n}\n\nUnknown argument `isSetupComplete`. Available options are marked with ?.\n    at Dn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at ri.handleRequestError (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:121:7102)\n    at ri.handleAndLogRequestError (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:121:6784)\n    at ri.request (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:121:6491)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async l (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/@prisma/client/runtime/library.js:130:9812)\n    at async UserService.findOrCreateUser (webpack-internal:///(rsc)/./src/lib/services/user.service.ts:21:24)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:29:26)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"07:50:20"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"07:51:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"07:51:10","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"New user created","platform":"telegram","timestamp":"07:51:19","userId":"cmdpjsjp20000yu0vhzifqvbs"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":71,"timestamp":"07:51:22","userId":"cmdpjsjp"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:00:16"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"08:00:16","userId":"69608666"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Failed to parse AI response","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:125:33)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:34:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"08:00:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":193,"timestamp":"08:00:22","userId":"cmdpjsjp"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:01:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"08:01:06","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":120,"timestamp":"08:01:12","userId":"cmdpjsjp"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:01:18"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Tapiwa","platform":"telegram","timestamp":"08:01:18","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":106,"timestamp":"08:01:22","userId":"cmdpjsjp"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:02:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"08:02:20","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"New user created","platform":"telegram","timestamp":"08:02:21","userId":"cmdpk6qz20001yu0vs4ha4tbn"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":95,"timestamp":"08:02:26","userId":"cmdpk6qz"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:02:34"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"deltaCS","platform":"telegram","timestamp":"08:02:34","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":94,"timestamp":"08:02:40","userId":"cmdpk6qz"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:03:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"i want to use deltaCS","platform":"telegram","timestamp":"08:03:07","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":107,"timestamp":"08:03:12","userId":"cmdpk6qz"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:09:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"HI","platform":"telegram","timestamp":"08:09:42","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"New user created","platform":"telegram","timestamp":"08:09:45","userId":"cmdpkg90n0002yu0vh7rivgmj"}
{"error":"Unexpected token O in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Failed to parse AI response","stack":"SyntaxError: Unexpected token O in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:109:33)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"08:09:48"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":222,"timestamp":"08:09:49","userId":"cmdpkg90"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:10:27"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"HI","platform":"telegram","timestamp":"08:10:27","userId":"69608666"}
{"error":"Failed to extract JSON: Okay, I understand. I will focus on extracting a username from the user's message first, and then potentially their name, while maintaining a natural and helpful conversational tone. I will also use the tools when appropriate, always returning valid JSON.\n","level":"\u001b[31merror\u001b[39m","message":"Failed to parse AI response","stack":"Error: Failed to extract JSON: Okay, I understand. I will focus on extracting a username from the user's message first, and then potentially their name, while maintaining a natural and helpful conversational tone. I will also use the tools when appropriate, always returning valid JSON.\n\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:111:91)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"08:10:30"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":256,"timestamp":"08:10:31","userId":"cmdpkg90"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:20:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"08:20:57","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"New user created","platform":"telegram","timestamp":"08:20:59","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":63,"timestamp":"08:21:05","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:21:12"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"deltaCS","platform":"telegram","timestamp":"08:21:12","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Username set successfully","timestamp":"08:21:20","userId":"cmdpkupeb0003yu0vvuz6tuwr","username":"deltacs"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"08:21:20","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:21:32"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Tapiwa","platform":"telegram","timestamp":"08:21:32","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Name set successfully","name":"Tapiwa","timestamp":"08:21:37","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":110,"timestamp":"08:21:37","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:22:32"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"i initially talke to Black Rose Guest House and te","platform":"telegram","timestamp":"08:22:32","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":175,"timestamp":"08:22:37","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:27:56"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"add them as a lead i contacted on monday","platform":"telegram","timestamp":"08:27:56","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"08:28:01","userId":"cmdpkupe"}
{"leadId":"cmdpl3she0005yu0vclfa6djq","leadName":"them","level":"\u001b[32minfo\u001b[39m","message":"Lead created","timestamp":"08:28:03"}
{"action":"create","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"08:28:03","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":148,"timestamp":"08:28:04","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:28:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"what leads do i have","platform":"telegram","timestamp":"08:28:24","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"08:28:30","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: I need information about your leads to provide a helpful response. Please provide updates about your prospects. For example: \"Just added John Smith, phone number is 555-123-4567\" or \"Emailed Jane Doe yesterday\".\n","level":"\u001b[31merror\u001b[39m","message":"Sales service error","stack":"Error: Failed to extract JSON: I need information about your leads to provide a helpful response. Please provide updates about your prospects. For example: \"Just added John Smith, phone number is 555-123-4567\" or \"Emailed Jane Doe yesterday\".\n\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:28:99)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:260:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:124:36)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"08:28:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":119,"timestamp":"08:28:32","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:46:28"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Hi","platform":"telegram","timestamp":"08:46:28","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":47,"timestamp":"08:46:37","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:46:51"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"What leads do I have","platform":"telegram","timestamp":"08:46:51","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"08:46:57","userId":"cmdpkupe"}
{"action":"query","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"08:46:58","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":80,"timestamp":"08:46:58","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:47:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Show me my pipeline","platform":"telegram","timestamp":"08:47:10","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"08:47:15","userId":"cmdpkupe"}
{"action":"query","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"08:47:16","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":77,"timestamp":"08:47:16","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:48:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Add a lead for M4m Guesthouse I contacted them on ","platform":"telegram","timestamp":"08:48:54","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"08:48:59","userId":"cmdpkupe"}
{"leadId":"cmdplur1z0001yv0vtg1a3wsm","leadName":"M4m Guesthouse","level":"\u001b[32minfo\u001b[39m","message":"Lead created","timestamp":"08:49:01"}
{"action":"create","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"08:49:01","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":521,"timestamp":"08:49:02","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"08:50:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"What leads do I have for today","platform":"telegram","timestamp":"08:50:07","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"08:50:12","userId":"cmdpkupe"}
{"action":"query","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"08:50:13","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":95,"timestamp":"08:50:14","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"09:04:19"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Create an account for me with fnb thats a persona","platform":"telegram","timestamp":"09:04:19","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"09:04:30","userId":"cmdpkupe"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Finance service error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at FinanceService.processMessage (webpack-internal:///(rsc)/./src/lib/services/finance.service.ts:30:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:262:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:124:36)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"09:04:35"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":157,"timestamp":"09:04:36","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"09:05:45"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Create an account for me with fnb thats a persona","platform":"telegram","timestamp":"09:05:45","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"09:05:50","userId":"cmdpkupe"}
{"accountName":"FNB Personal Loan","balance":2875,"level":"\u001b[32minfo\u001b[39m","message":"Account updated","timestamp":"09:05:54"}
{"action":"update_account","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"09:05:55","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":998,"timestamp":"09:05:57","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"09:06:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"but then i already missed one payment and incurred","platform":"telegram","timestamp":"09:06:49","userId":"69608666"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"09:32:33"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"but then i already missed one payment and incurred","platform":"telegram","timestamp":"09:32:33","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"09:32:41","userId":"cmdpkupe"}
{"accountName":"FNB Personal Loan","balance":2875,"level":"\u001b[32minfo\u001b[39m","message":"Account updated","timestamp":"09:32:45"}
{"action":"update_account","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"09:32:47","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1010,"timestamp":"09:32:48","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"09:35:40","userId":"cmdpkupe"}
{"accountName":"FNB Personal Loan","balance":2875,"level":"\u001b[32minfo\u001b[39m","message":"Account updated","timestamp":"09:35:44"}
{"action":"update_account","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"09:35:46","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":900,"timestamp":"09:35:46","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"11:38:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Hi","platform":"telegram","timestamp":"11:38:15","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":47,"timestamp":"11:38:24","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"11:38:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Whats my pipeline looking like","platform":"telegram","timestamp":"11:38:38","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"11:38:42","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"11:38:47","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":264,"timestamp":"11:38:47","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"11:39:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Please delete them","platform":"telegram","timestamp":"11:39:11","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":47,"timestamp":"11:39:15","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:17:50"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"whats my pipeline looking like","platform":"telegram","timestamp":"12:17:50","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"12:18:00","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"12:18:04","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":280,"timestamp":"12:18:05","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:18:19"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"i want to delete a lead","platform":"telegram","timestamp":"12:18:19","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"12:18:24","userId":"cmdpkupe"}
{"error":"Contact name required for deletion","level":"\u001b[31merror\u001b[39m","message":"Sales service error","stack":"Error: Contact name required for deletion\n    at SalesService.processLeadUpdate (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:118:41)\n    at SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:40:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:260:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:124:36)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"12:18:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":106,"timestamp":"12:18:27","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:18:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"i want to delete them","platform":"telegram","timestamp":"12:18:57","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":48,"timestamp":"12:19:01","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:19:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"i want to delete the contact them","platform":"telegram","timestamp":"12:19:21","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":107,"timestamp":"12:19:26","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:19:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"the name is 'them'","platform":"telegram","timestamp":"12:19:46","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Name set successfully","name":"them","timestamp":"12:19:52","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":80,"timestamp":"12:19:52","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:20:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"what is my name","platform":"telegram","timestamp":"12:20:03","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":18,"timestamp":"12:20:07","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:20:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"No my name is tapiwa","platform":"telegram","timestamp":"12:20:15","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":44,"timestamp":"12:20:19","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:20:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"i want to set my name to Tapiwa","platform":"telegram","timestamp":"12:20:37","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Name set successfully","name":"Tapiwa","timestamp":"12:20:45","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":57,"timestamp":"12:20:45","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:21:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"awesome i made a mistake a while back and named a ","platform":"telegram","timestamp":"12:21:14","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"12:21:20","userId":"cmdpkupe"}
{"leadId":"cmdpl3she0005yu0vclfa6djq","leadName":"them","level":"\u001b[32minfo\u001b[39m","message":"Lead deleted","timestamp":"12:21:24"}
{"action":"delete","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"12:21:24","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":95,"timestamp":"12:21:24","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:21:36"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"give me all my leads","platform":"telegram","timestamp":"12:21:36","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"12:21:40","userId":"cmdpkupe"}
{"action":"query","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"12:21:44","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":287,"timestamp":"12:21:44","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:22:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"awesome how am i doing financial","platform":"telegram","timestamp":"12:22:25","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"12:22:29","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"12:22:37","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":933,"timestamp":"12:22:38","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:36:45"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Hi","platform":"telegram","timestamp":"12:36:45","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":45,"timestamp":"12:36:53","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:37:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"12:37:06","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"12:37:11","userId":"cmdpkupe"}
{"error":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"transaction\",\n      \"description\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"transaction\",\n      \"amount\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Income' | 'Fixed Expenses' | 'Variable Expenses' | 'Savings' | 'Investment' | 'Debt Payment'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"transaction\",\n      \"category\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"account\",\n      \"name\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Asset' | 'Liability' | 'Investment' | 'Emergency Fund'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"account\",\n      \"type\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"account\",\n      \"currentBalance\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'week' | 'month'\",\n    \"received\": \"null\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"grouping\"\n    ],\n    \"message\": \"Expected 'week' | 'month', received null\"\n  }\n]","level":"\u001b[31merror\u001b[39m","message":"Finance service error","stack":"ZodError: [\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"transaction\",\n      \"description\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"transaction\",\n      \"amount\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Income' | 'Fixed Expenses' | 'Variable Expenses' | 'Savings' | 'Investment' | 'Debt Payment'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"transaction\",\n      \"category\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"account\",\n      \"name\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Asset' | 'Liability' | 'Investment' | 'Emergency Fund'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"account\",\n      \"type\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"account\",\n      \"currentBalance\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'week' | 'month'\",\n    \"received\": \"null\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"grouping\"\n    ],\n    \"message\": \"Expected 'week' | 'month', received null\"\n  }\n]\n    at get error [as error] (webpack-internal:///(rsc)/./node_modules/zod/v3/types.js:134:31)\n    at ZodObject.parse (webpack-internal:///(rsc)/./node_modules/zod/v3/types.js:209:22)\n    at FinanceService.processMessage (webpack-internal:///(rsc)/./src/lib/services/finance.service.ts:35:103)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:262:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:124:36)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"12:37:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":221,"timestamp":"12:37:14","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:39:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"12:39:38","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"12:39:43","userId":"cmdpkupe"}
{"error":"[\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"transaction\",\n      \"description\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"transaction\",\n      \"amount\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Income' | 'Fixed Expenses' | 'Variable Expenses' | 'Savings' | 'Investment' | 'Debt Payment'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"transaction\",\n      \"category\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"account\",\n      \"name\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Asset' | 'Liability' | 'Investment' | 'Emergency Fund'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"account\",\n      \"type\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"account\",\n      \"currentBalance\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'week' | 'month'\",\n    \"received\": \"null\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"grouping\"\n    ],\n    \"message\": \"Expected 'week' | 'month', received null\"\n  }\n]","level":"\u001b[31merror\u001b[39m","message":"Finance service error","stack":"ZodError: [\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"transaction\",\n      \"description\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"transaction\",\n      \"amount\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Income' | 'Fixed Expenses' | 'Variable Expenses' | 'Savings' | 'Investment' | 'Debt Payment'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"transaction\",\n      \"category\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"account\",\n      \"name\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'Asset' | 'Liability' | 'Investment' | 'Emergency Fund'\",\n    \"received\": \"undefined\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"account\",\n      \"type\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"number\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"account\",\n      \"currentBalance\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"expected\": \"'week' | 'month'\",\n    \"received\": \"null\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"grouping\"\n    ],\n    \"message\": \"Expected 'week' | 'month', received null\"\n  }\n]\n    at get error [as error] (webpack-internal:///(rsc)/./node_modules/zod/v3/types.js:134:31)\n    at ZodObject.parse (webpack-internal:///(rsc)/./node_modules/zod/v3/types.js:209:22)\n    at FinanceService.processMessage (webpack-internal:///(rsc)/./src/lib/services/finance.service.ts:35:103)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:262:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:124:36)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"12:39:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":245,"timestamp":"12:39:46","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"12:49:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"12:49:17","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"12:49:23","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"12:49:27","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":667,"timestamp":"12:49:28","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:01:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"13:01:40","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"13:01:48","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"13:01:54","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1226,"timestamp":"13:01:55","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:07:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"13:07:40","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"13:07:44","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"13:07:50","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1086,"timestamp":"13:07:51","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:08:35"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"13:08:35","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"13:08:41","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"13:08:49","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1016,"timestamp":"13:08:49","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:17:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"13:17:02","userId":"69608666"}
{"error":"Unexpected token ` in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"SyntaxError: Unexpected token ` in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:74:35)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"13:17:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":47,"timestamp":"13:17:08","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:17:45"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"13:17:45","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing finance message","timestamp":"13:17:50","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"13:17:57","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":935,"timestamp":"13:17:58","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:18:55"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how fast is the earth travelling","platform":"telegram","timestamp":"13:18:55","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":130,"timestamp":"13:19:01","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:19:45"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"cool whos the richest man alive","platform":"telegram","timestamp":"13:19:45","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":269,"timestamp":"13:19:50","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:20:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"cool","platform":"telegram","timestamp":"13:20:03","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":49,"timestamp":"13:20:09","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:24:55"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"what leads do i have","platform":"telegram","timestamp":"13:24:55","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing sales message","timestamp":"13:24:59","userId":"cmdpkupe"}
{"action":"query","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"13:25:02","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":237,"timestamp":"13:25:03","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:25:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"so will you remind me about that ?","platform":"telegram","timestamp":"13:25:26","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":87,"timestamp":"13:25:31","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"13:25:44"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"what time are my notifications","platform":"telegram","timestamp":"13:25:44","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":40,"timestamp":"13:25:49","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"14:02:01"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Hi","platform":"telegram","timestamp":"14:02:01","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":48,"timestamp":"14:02:11","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"14:02:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"How am I found financially","platform":"telegram","timestamp":"14:02:24","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message","timestamp":"14:02:31","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"14:02:33","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":875,"timestamp":"14:02:35","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"14:04:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"And how many leads do I have","platform":"telegram","timestamp":"14:04:09","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"14:04:18","userId":"cmdpkupe"}
{"action":"query","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"14:04:19","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":92,"timestamp":"14:04:20","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"14:05:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Add number to +27 76 372 8896 to M4m guest house","platform":"telegram","timestamp":"14:05:09","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"14:05:15","userId":"cmdpkupe"}
{"action":"update","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"14:05:16","userId":"cmdpkupe"}
{"error":"Lead \"M4m guest house\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: Lead \"M4m guest house\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:123:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:24:28)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"14:05:17","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"14:05:17","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"14:06:19"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Add number to +27 76 372 8896 to M4m Guesthouse","platform":"telegram","timestamp":"14:06:19","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":40,"timestamp":"14:06:24","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"14:06:34"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Add number to +27 76 372 8896 to M4m Guesthouse le","platform":"telegram","timestamp":"14:06:34","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"14:06:40","userId":"cmdpkupe"}
{"action":"update","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"14:06:41","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":56,"timestamp":"14:06:42","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"14:07:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Show me details about M4m Guesthouse","platform":"telegram","timestamp":"14:07:10","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"14:07:14","userId":"cmdpkupe"}
{"action":"query","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"14:07:14","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":92,"timestamp":"14:07:15","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:04:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Hi","platform":"telegram","timestamp":"16:04:37","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":48,"timestamp":"16:04:48","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:05:08"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Show me details about M4m Guest house","platform":"telegram","timestamp":"16:05:08","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"16:05:15","userId":"cmdpkupe"}
{"action":"view","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"16:05:16","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":294,"timestamp":"16:05:18","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:05:44"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Awesome how am I looking financially","platform":"telegram","timestamp":"16:05:44","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message","timestamp":"16:05:52","userId":"cmdpkupe"}
{"action":"summary","level":"\u001b[32minfo\u001b[39m","message":"Finance message processed","timestamp":"16:05:55","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1030,"timestamp":"16:05:58","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:13:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Add lead Dandrom Guest House I contacted them on M","platform":"telegram","timestamp":"16:13:25","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"16:13:32","userId":"cmdpkupe"}
{"action":"update","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"16:13:34","userId":"cmdpkupe"}
{"error":"Lead \"Dandrom Guest House\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: Lead \"Dandrom Guest House\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:241:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:25:28)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:13:36","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"16:13:36","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:14:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I contacted them on Dandrom Guest House Monday and","platform":"telegram","timestamp":"16:14:22","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"16:14:29","userId":"cmdpkupe"}
{"action":"update","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"16:14:32","userId":"cmdpkupe"}
{"error":"Lead \"Dandrom Guest House\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: Lead \"Dandrom Guest House\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:241:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:25:28)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:14:34","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"16:14:34","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:32:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Hi","platform":"telegram","timestamp":"16:32:40","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":49,"timestamp":"16:32:49","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:33:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I contacted Dandrom Guest House on Monday and he s","platform":"telegram","timestamp":"16:33:13","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"16:33:20","userId":"cmdpkupe"}
{"action":"update","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"16:33:22","userId":"cmdpkupe"}
{"error":"Lead \"Dandrom Guest House\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: Lead \"Dandrom Guest House\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:241:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:25:28)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:33:24","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"16:33:24","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:33:48"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I contacted Dandrom Guest House on Monday and he s","platform":"telegram","timestamp":"16:33:48","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"16:33:54","userId":"cmdpkupe"}
{"action":"update","level":"\u001b[32minfo\u001b[39m","message":"Sales message processed","timestamp":"16:33:57","userId":"cmdpkupe"}
{"error":"Lead \"Dandrom Guest House\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: Lead \"Dandrom Guest House\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:241:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:25:28)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:33:58","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"16:33:58","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:40:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I contacted Dandrom Guest House on Monday and he s","platform":"telegram","timestamp":"16:40:26","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message","timestamp":"16:40:32","userId":"cmdpkupe"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Sales service error","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:27:32)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:24:32)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:40:33"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:27:32)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:24:32)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:40:33","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"16:40:33","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:42:45"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I contacted Dandrom Guest House on Monday and he s","platform":"telegram","timestamp":"16:42:45","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"16:42:52","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"16:42:54","userId":"cmdpkupe"}
{"error":"Lead \"Dandrom Guest House\" not found","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: Lead \"Dandrom Guest House\" not found\n    at SalesService.updateLead (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:241:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:25:28)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:42:56","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":86,"timestamp":"16:42:56","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:47:47"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I contacted Dandrom Guest House on Monday and he s","platform":"telegram","timestamp":"16:47:47","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"16:47:54","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"16:47:57","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Lead \"Dandrom Guest House\" not found for update, creating instead","timestamp":"16:47:59","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"16:48:01","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:56:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"16:56:13","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":48,"timestamp":"16:56:19","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:56:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I contacted Dandrom Guest House on Monday and he s","platform":"telegram","timestamp":"16:56:21","userId":"69608666"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"16:56:30","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":109,"timestamp":"16:56:30","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:56:56"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I contacted Dandrom Guest House on Monday and he s","platform":"telegram","timestamp":"16:56:56","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"16:57:02","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"16:57:05","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":61,"timestamp":"16:57:06","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"16:57:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"give me more info about dandrom guest house","platform":"telegram","timestamp":"16:57:20","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":234,"timestamp":"16:57:27","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:40:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"17:40:38","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":53,"timestamp":"17:40:49","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:41:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"did i manage to get some progress today","platform":"telegram","timestamp":"17:41:10","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"17:41:15","userId":"cmdpkupe"}
{"action":"conversation","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"17:41:18","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":246,"timestamp":"17:41:19","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:47:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"contacted Black Rose Guest House on Mondaly also b","platform":"telegram","timestamp":"17:47:46","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"17:47:54","userId":"cmdpkupe"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[33mwarn\u001b[39m","message":"Sales attempt 1 failed, retrying...","nextAttempt":2,"timestamp":"17:47:56","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 2)","timestamp":"17:47:57","userId":"cmdpkupe"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Sales service error after 2 attempts","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:29:36)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:26:32)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:47:59"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:29:36)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:26:32)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:47:59","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":112,"timestamp":"17:47:59","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:48:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"contacted Black Rose Guest House on Mondaly also b","platform":"telegram","timestamp":"17:48:07","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"17:48:11","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"17:48:12","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Lead \"Black Rose Guest House\" not found for update, creating instead","timestamp":"17:48:14","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":518,"timestamp":"17:48:16","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:48:34"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"its a new lead","platform":"telegram","timestamp":"17:48:34","userId":"69608666"}
{"error":"AI processing failed: fetch failed","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: AI processing failed: fetch failed\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:37:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:51:10","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"error":"EFATAL: Error: getaddrinfo EAI_AGAIN api.telegram.org","level":"\u001b[31merror\u001b[39m","message":"Message processing failed","stack":"Error: EFATAL: Error: getaddrinfo EAI_AGAIN api.telegram.org\n    at new RequestError (webpack-internal:///(rsc)/./node_modules/request-promise-core/lib/errors.js:14:15)\n    at plumbing.callback (webpack-internal:///(rsc)/./node_modules/request-promise-core/lib/plumbing.js:87:29)\n    at Request.RP$callback [as _callback] (webpack-internal:///(rsc)/./node_modules/request-promise-core/lib/plumbing.js:46:31)\n    at self.callback (webpack-internal:///(rsc)/./node_modules/@cypress/request/request.js:183:22)\n    at Request.emit (node:events:517:28)\n    at Request.onRequestError (webpack-internal:///(rsc)/./node_modules/@cypress/request/request.js:869:8)\n    at ClientRequest.emit (node:events:517:28)\n    at TLSSocket.socketErrorListener (node:_http_client:501:9)\n    at TLSSocket.emit (node:events:517:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at plumbing.init (webpack-internal:///(rsc)/./node_modules/request-promise-core/lib/plumbing.js:36:28)\n    at Request.RP$initInterceptor [as init] (webpack-internal:///(rsc)/./node_modules/request-promise-core/configure/request2.js:41:27)\n    at new Request (webpack-internal:///(rsc)/./node_modules/@cypress/request/request.js:125:8)\n    at request (webpack-internal:///(rsc)/./node_modules/@cypress/request/index.js:53:10)\n    at TelegramBot._request (webpack-internal:///(rsc)/./node_modules/node-telegram-bot-api/src/telegram.js:286:12)\nFrom previous event:\n    at TelegramBot._request (webpack-internal:///(rsc)/./node_modules/node-telegram-bot-api/src/telegram.js:300:15)\n    at TelegramBot.sendMessage (webpack-internal:///(rsc)/./node_modules/node-telegram-bot-api/src/telegram.js:915:17)\n    at TelegramProvider.sendMessage (webpack-internal:///(rsc)/./src/lib/messaging/providers/telegram.ts:20:28)\n    at MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:43:28)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:51:21"}
{"error":"EFATAL: Error: getaddrinfo EAI_AGAIN api.telegram.org","level":"\u001b[31merror\u001b[39m","message":"Failed to send error message","stack":"Error: EFATAL: Error: getaddrinfo EAI_AGAIN api.telegram.org\n    at new RequestError (webpack-internal:///(rsc)/./node_modules/request-promise-core/lib/errors.js:14:15)\n    at plumbing.callback (webpack-internal:///(rsc)/./node_modules/request-promise-core/lib/plumbing.js:87:29)\n    at Request.RP$callback [as _callback] (webpack-internal:///(rsc)/./node_modules/request-promise-core/lib/plumbing.js:46:31)\n    at self.callback (webpack-internal:///(rsc)/./node_modules/@cypress/request/request.js:183:22)\n    at Request.emit (node:events:517:28)\n    at Request.onRequestError (webpack-internal:///(rsc)/./node_modules/@cypress/request/request.js:869:8)\n    at ClientRequest.emit (node:events:517:28)\n    at TLSSocket.socketErrorListener (node:_http_client:501:9)\n    at TLSSocket.emit (node:events:517:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at plumbing.init (webpack-internal:///(rsc)/./node_modules/request-promise-core/lib/plumbing.js:36:28)\n    at Request.RP$initInterceptor [as init] (webpack-internal:///(rsc)/./node_modules/request-promise-core/configure/request2.js:41:27)\n    at new Request (webpack-internal:///(rsc)/./node_modules/@cypress/request/request.js:125:8)\n    at request (webpack-internal:///(rsc)/./node_modules/@cypress/request/index.js:53:10)\n    at TelegramBot._request (webpack-internal:///(rsc)/./node_modules/node-telegram-bot-api/src/telegram.js:286:12)\nFrom previous event:\n    at TelegramBot._request (webpack-internal:///(rsc)/./node_modules/node-telegram-bot-api/src/telegram.js:300:15)\n    at TelegramBot.sendMessage (webpack-internal:///(rsc)/./node_modules/node-telegram-bot-api/src/telegram.js:915:17)\n    at TelegramProvider.sendMessage (webpack-internal:///(rsc)/./src/lib/messaging/providers/telegram.ts:20:28)\n    at MessageRouterService.sendErrorMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:66:32)\n    at MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:50:24)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:51:31"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:52:51"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"contacted Black Rose Guest House on Mondaly also b","platform":"telegram","timestamp":"17:52:51","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"17:52:58","userId":"cmdpkupe"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[33mwarn\u001b[39m","message":"Sales attempt 1 failed, retrying...","nextAttempt":2,"timestamp":"17:53:00","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 2)","timestamp":"17:53:01","userId":"cmdpkupe"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Sales service error after 2 attempts","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:29:36)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:26:32)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:53:02"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Sales error","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:29:36)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:26:32)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:196:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"17:53:02","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":112,"timestamp":"17:53:02","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:53:28"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"contacted Black Rose Guest House on Mondaly also b","platform":"telegram","timestamp":"17:53:28","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"17:53:38","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"17:53:40","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Lead \"Black Rose Guest House\" not found for update, creating instead","timestamp":"17:53:41","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":518,"timestamp":"17:53:43","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:53:50"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"new lead","platform":"telegram","timestamp":"17:53:50","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"17:53:59","userId":"cmdpkupe"}
{"action":"conversation","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"17:54:01","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":315,"timestamp":"17:54:02","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"17:58:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"add new lead Black Rose Guest House contacted them","platform":"telegram","timestamp":"17:58:04","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"17:58:12","userId":"cmdpkupe"}
{"action":"create","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"17:58:15","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":520,"timestamp":"17:58:17","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:51:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"18:51:57","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":54,"timestamp":"18:52:08","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:52:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"did i manage to get some progress today","platform":"telegram","timestamp":"18:52:15","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"18:52:24","userId":"cmdpkupe"}
{"action":"conversation","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"18:52:25","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message (attempt 1)","timestamp":"18:52:32","userId":"cmdpkupe"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[33mwarn\u001b[39m","message":"Finance attempt 1 failed, retrying...","nextAttempt":2,"timestamp":"18:52:35","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message (attempt 2)","timestamp":"18:52:36","userId":"cmdpkupe"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Finance service error after 2 attempts","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FinanceService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:29:36)\n    at async FinanceService.processMessage (webpack-internal:///(rsc)/./src/lib/services/finance.service.ts:18:35)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:198:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:52:37"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Finance error","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FinanceService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:29:36)\n    at async FinanceService.processMessage (webpack-internal:///(rsc)/./src/lib/services/finance.service.ts:18:35)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:198:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:84:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:70:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:39:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"18:52:37","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":402,"timestamp":"18:52:38","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"18:52:53"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"did i manage to get some progress today","platform":"telegram","timestamp":"18:52:53","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"18:52:57","userId":"cmdpkupe"}
{"action":"conversation","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"18:52:58","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":295,"timestamp":"18:53:01","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"20:36:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Hi","platform":"telegram","timestamp":"20:36:13","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":74,"timestamp":"20:36:24","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:32:12"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:32:12","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":48,"timestamp":"23:32:23","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:32:32"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"did i make and progress today","platform":"telegram","timestamp":"23:32:32","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:32:39","userId":"cmdpkupe"}
{"action":"conversation","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:32:40","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing ProgressDetection message (attempt 1)","timestamp":"23:32:40","userId":"cmdpkupe"}
{"attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"ProgressDetection message processed successfully","timestamp":"23:32:41","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesProgress message (attempt 1)","timestamp":"23:32:42","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: Okay, here's a sales progress report based on the data you provided. I'll focus on the areas you requested: Pipeline Health, Activity Trends, Goal Progress, Action Items, and Momentum Indicators.\n\n**Sales Progress Report - Analysis Period: Last 3 Months (Ending 2025-07-30)**\n\n**Executive Summary:**\n\nYou've generated 2 leads in the last three months, and you're actively engaging with them.  Your initial contact and interest rates are strong, but you haven't closed any deals yet.  Your pipeline value is promising, with $1600 tied up in leads currently in the negotiation stage.  Focus on converting these leads and improving your follow-up consistency to drive revenue.\n\n**1. Pipeline Health:**\n\n*   **Lead Quality:** You've generated 2 leads in the last 3 months.  The fact that 100% of them have expressed interest is a positive sign. This suggests you're targeting the right audience or your initial outreach is compelling.\n*   **Conversion Rates:**\n    *   **Contacted Rate: 100%** - Excellent! You're reaching out to all your leads.\n    *   **Reply Rate: 50%** - Good. Half of your contacted leads are responding. This indicates your initial messaging is resonating to some degree.\n    *   **Interest Rate: 100%** - Fantastic! All leads who replied are showing interest. This is a strong indicator of potential.\n    *   **Win Rate: 0%** - This is the area that needs immediate attention. You haven't closed any deals in the last three months.\n*   **Follow-up Consistency:**  Follow-up coverage is at 50%, meaning only half of your active leads have scheduled follow-ups. This is a significant area for improvement.\n\n**Insight:** You're doing a great job attracting interested leads, but you need to focus on converting that interest into closed deals. The lack of closed deals and inconsistent follow-ups are hindering your progress.\n\n**2. Activity Trends:**\n\n*   **Updates This Week: 2** - You're actively updating your lead records, which is good for tracking progress.\n*   **Follow-ups Scheduled: 1** - This is low. You need to significantly increase the number of follow-ups scheduled.\n*   **Overdue Follow-ups: 0** - This is positive! You're not letting any follow-ups slip through the cracks.\n*   **Activity Score: 3** - This is a general indicator of your overall activity level. It's difficult to assess without knowing the scoring system, but it likely reflects the low number of follow-ups scheduled.\n\n**Insight:** Your activity level needs to increase, particularly in the area of scheduling and executing follow-up activities.\n\n**3. Goal Progress:**\n\n*   **Revenue Targets:**  You're currently at 0% of your revenue target for the last three months.\n*   **Lead Targets:** You've generated 2 leads, but without knowing your target, it's hard to assess progress.\n*   **Conversion Improvements:**  The primary goal should be to improve your win rate.\n\n**Insight:** You need to define specific, measurable, achievable, relevant, and time-bound (SMART) goals for leads, revenue, and conversion rates. This will provide a clear benchmark for measuring progress.\n\n**4. Action Items:**\n\n*   **Prioritize Closing Deals:** Focus your energy on the two leads in the negotiation stage. Understand their concerns, address their objections, and offer solutions to help them move forward.\n*   **Implement a Structured Follow-up System:** For every lead, schedule a series of follow-up activities (calls, emails, meetings) at regular intervals. Use a CRM or calendar to track these activities.\n*   **Refine Your Sales Process:** Analyze your sales process to identify bottlenecks. Where are leads getting stuck? What can you do to improve the flow?\n*   **Improve Proposal Quality:** If you're sending proposals, ensure they are tailored to the specific needs of each client. Highlight the value you offer and address any potential concerns.\n*   **Seek Feedback:** Ask for feedback from your manager or colleagues on your sales techniques and strategies.\n*   **Set SMART Goals:** Define specific, measurable, achievable, relevant, and time-bound goals for leads, revenue, and conversion rates.\n*   **Increase Follow-up Coverage:** Aim for 100% follow-up coverage on all active leads.\n\n**5. Momentum Indicators:**\n\n*   **What's Working Well:**\n    *   **Lead Generation","level":"\u001b[31merror\u001b[39m","message":"SalesProgress service error after 1 attempts","stack":"Error: Failed to extract JSON: Okay, here's a sales progress report based on the data you provided. I'll focus on the areas you requested: Pipeline Health, Activity Trends, Goal Progress, Action Items, and Momentum Indicators.\n\n**Sales Progress Report - Analysis Period: Last 3 Months (Ending 2025-07-30)**\n\n**Executive Summary:**\n\nYou've generated 2 leads in the last three months, and you're actively engaging with them.  Your initial contact and interest rates are strong, but you haven't closed any deals yet.  Your pipeline value is promising, with $1600 tied up in leads currently in the negotiation stage.  Focus on converting these leads and improving your follow-up consistency to drive revenue.\n\n**1. Pipeline Health:**\n\n*   **Lead Quality:** You've generated 2 leads in the last 3 months.  The fact that 100% of them have expressed interest is a positive sign. This suggests you're targeting the right audience or your initial outreach is compelling.\n*   **Conversion Rates:**\n    *   **Contacted Rate: 100%** - Excellent! You're reaching out to all your leads.\n    *   **Reply Rate: 50%** - Good. Half of your contacted leads are responding. This indicates your initial messaging is resonating to some degree.\n    *   **Interest Rate: 100%** - Fantastic! All leads who replied are showing interest. This is a strong indicator of potential.\n    *   **Win Rate: 0%** - This is the area that needs immediate attention. You haven't closed any deals in the last three months.\n*   **Follow-up Consistency:**  Follow-up coverage is at 50%, meaning only half of your active leads have scheduled follow-ups. This is a significant area for improvement.\n\n**Insight:** You're doing a great job attracting interested leads, but you need to focus on converting that interest into closed deals. The lack of closed deals and inconsistent follow-ups are hindering your progress.\n\n**2. Activity Trends:**\n\n*   **Updates This Week: 2** - You're actively updating your lead records, which is good for tracking progress.\n*   **Follow-ups Scheduled: 1** - This is low. You need to significantly increase the number of follow-ups scheduled.\n*   **Overdue Follow-ups: 0** - This is positive! You're not letting any follow-ups slip through the cracks.\n*   **Activity Score: 3** - This is a general indicator of your overall activity level. It's difficult to assess without knowing the scoring system, but it likely reflects the low number of follow-ups scheduled.\n\n**Insight:** Your activity level needs to increase, particularly in the area of scheduling and executing follow-up activities.\n\n**3. Goal Progress:**\n\n*   **Revenue Targets:**  You're currently at 0% of your revenue target for the last three months.\n*   **Lead Targets:** You've generated 2 leads, but without knowing your target, it's hard to assess progress.\n*   **Conversion Improvements:**  The primary goal should be to improve your win rate.\n\n**Insight:** You need to define specific, measurable, achievable, relevant, and time-bound (SMART) goals for leads, revenue, and conversion rates. This will provide a clear benchmark for measuring progress.\n\n**4. Action Items:**\n\n*   **Prioritize Closing Deals:** Focus your energy on the two leads in the negotiation stage. Understand their concerns, address their objections, and offer solutions to help them move forward.\n*   **Implement a Structured Follow-up System:** For every lead, schedule a series of follow-up activities (calls, emails, meetings) at regular intervals. Use a CRM or calendar to track these activities.\n*   **Refine Your Sales Process:** Analyze your sales process to identify bottlenecks. Where are leads getting stuck? What can you do to improve the flow?\n*   **Improve Proposal Quality:** If you're sending proposals, ensure they are tailored to the specific needs of each client. Highlight the value you offer and address any potential concerns.\n*   **Seek Feedback:** Ask for feedback from your manager or colleagues on your sales techniques and strategies.\n*   **Set SMART Goals:** Define specific, measurable, achievable, relevant, and time-bound goals for leads, revenue, and conversion rates.\n*   **Increase Follow-up Coverage:** Aim for 100% follow-up coverage on all active leads.\n\n**5. Momentum Indicators:**\n\n*   **What's Working Well:**\n    *   **Lead Generation\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at SalesService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:30:107)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async SalesService.generateProgressReport (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:272:28)\n    at async SalesService.handleConversation (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:240:24)\n    at async SalesService.processMessage (webpack-internal:///(rsc)/./src/lib/services/sales.service.ts:40:28)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:216:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:107:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:94:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:51:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:32:49"}
{"error":{"error":{},"userId":"cmdpkupeb0003yu0vvuz6tuwr"},"level":"\u001b[31merror\u001b[39m","message":"AI progress report generation failed","timestamp":"23:32:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message (attempt 1)","timestamp":"23:32:50","userId":"cmdpkupe"}
{"action":"conversation","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Finance message processed successfully","timestamp":"23:32:52","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing FinanceProgressDetection message (attempt 1)","timestamp":"23:32:52","userId":"cmdpkupe"}
{"attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"FinanceProgressDetection message processed successfully","timestamp":"23:32:53","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing FinanceProgress message (attempt 1)","timestamp":"23:32:55","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: ## Financial Health Report - Let's Build a Stronger Foundation!\n\nThis report analyzes your financial data and provides actionable steps to improve your financial well-being. We'll focus on wealth building, spending patterns, goal progress, overall financial health, and how well you're adhering to the principles of wealth creation inspired by the \"Richest Man in Babylon.\"\n\n**Overall Impression:**\n\nCurrently, your financial situation requires immediate attention. You have a negative net worth, no assets, and significant liabilities.  You also have no income or expenses recorded in the last 6 months. While the data shows a strong potential for increasing earnings, the lack of income and savings is a major concern.  This report will outline steps to address these challenges and build a solid financial foundation.\n\n**1. Wealth Building: Starting from Scratch**\n\n*   **Net Worth:** Your net worth is currently **-$2,875**. This means your liabilities (debts) exceed your assets.\n*   **Savings Rate:** Your savings rate is **0%**.  You are not currently saving any portion of your income.\n*   **Investment Growth:** You have **no investments**.\n\n**Analysis:**  Building wealth starts with a positive net worth.  The immediate priority is to address the debt and begin accumulating assets.  A 0% savings rate is unsustainable.\n\n**Recommendations:**\n\n*   **Debt Reduction Plan:**  Create a detailed list of all debts, including interest rates and minimum payments.  Explore debt consolidation or balance transfer options to lower interest rates.  Consider the debt snowball or debt avalanche method for repayment.\n*   **Emergency Fund First:** Before investing, focus on building an emergency fund.  Start small, aiming for $1,000 initially.\n*   **Automate Savings:** Once you have income, set up automatic transfers to a savings account, even if it's a small amount.\n\n**2. Spending Patterns: Understanding Where Your Money Goes (or Doesn't)**\n\n*   **Spending Data:**  The data shows **no expenses** recorded in the last 6 months.\n*   **Spending Efficiency:**  Without spending data, it's impossible to assess spending efficiency.\n*   **Budget Adherence:**  Without a budget or spending data, budget adherence cannot be evaluated.\n\n**Analysis:**  The lack of spending data makes it difficult to understand your financial habits.  It's crucial to track your income and expenses to gain control of your finances.\n\n**Recommendations:**\n\n*   **Track Every Penny:**  Use a budgeting app (Mint, YNAB, Personal Capital) or a spreadsheet to meticulously track all income and expenses for at least one month.\n*   **Create a Budget:**  Based on your tracked spending, create a realistic budget that allocates funds for essential expenses, debt repayment, savings, and discretionary spending.\n*   **Identify Areas for Reduction:**  Once you have a budget, identify areas where you can cut back on spending to free up money for debt repayment and savings.\n\n**3. Goal Progress: Building a Roadmap to Success**\n\n*   **Emergency Fund:** You have **0 months** of living expenses saved in an emergency fund.\n*   **Savings Targets:**  No savings targets are defined.\n*   **Debt Reduction:**  No specific debt reduction plan is in place.\n\n**Analysis:**  You are significantly behind on essential financial goals.  Building an emergency fund and creating a debt reduction plan are critical first steps.\n\n**Recommendations:**\n\n*   **Emergency Fund Goal:**  Set a goal to save 3-6 months of essential living expenses in an easily accessible, high-yield savings account.\n*   **Debt Reduction Goal:**  Define a timeline for paying off your debts, prioritizing high-interest debts.\n*   **Savings Goals:**  Establish specific savings goals for future needs, such as a down payment on a house, retirement, or education.\n\n**4. Financial Health: Assessing Your Current State**\n\n*   **Income vs. Expenses:**  The data shows **no income or expenses**.\n*   **Debt-to-Income Ratio:**  The debt-to-income ratio is **0%** due to the lack of income data.\n*   **Diversification:**  You have **no investments**, so diversification is not applicable.\n\n**Analysis:**  The lack of income is a major concern.  Addressing this is the first step towards improving your financial health.\n\n**Recommendations:**\n\n*   **Increase Income:**  Focus on increasing your income through employment, freelancing, or starting a side business.\n*   **Monitor Debt-to-Income Ratio:**  Once you have income, calculate your debt-to-income ratio and aim to keep it below 36%.\n*   **Diversify Investments:**  ","level":"\u001b[31merror\u001b[39m","message":"FinanceProgress service error after 1 attempts","stack":"Error: Failed to extract JSON: ## Financial Health Report - Let's Build a Stronger Foundation!\n\nThis report analyzes your financial data and provides actionable steps to improve your financial well-being. We'll focus on wealth building, spending patterns, goal progress, overall financial health, and how well you're adhering to the principles of wealth creation inspired by the \"Richest Man in Babylon.\"\n\n**Overall Impression:**\n\nCurrently, your financial situation requires immediate attention. You have a negative net worth, no assets, and significant liabilities.  You also have no income or expenses recorded in the last 6 months. While the data shows a strong potential for increasing earnings, the lack of income and savings is a major concern.  This report will outline steps to address these challenges and build a solid financial foundation.\n\n**1. Wealth Building: Starting from Scratch**\n\n*   **Net Worth:** Your net worth is currently **-$2,875**. This means your liabilities (debts) exceed your assets.\n*   **Savings Rate:** Your savings rate is **0%**.  You are not currently saving any portion of your income.\n*   **Investment Growth:** You have **no investments**.\n\n**Analysis:**  Building wealth starts with a positive net worth.  The immediate priority is to address the debt and begin accumulating assets.  A 0% savings rate is unsustainable.\n\n**Recommendations:**\n\n*   **Debt Reduction Plan:**  Create a detailed list of all debts, including interest rates and minimum payments.  Explore debt consolidation or balance transfer options to lower interest rates.  Consider the debt snowball or debt avalanche method for repayment.\n*   **Emergency Fund First:** Before investing, focus on building an emergency fund.  Start small, aiming for $1,000 initially.\n*   **Automate Savings:** Once you have income, set up automatic transfers to a savings account, even if it's a small amount.\n\n**2. Spending Patterns: Understanding Where Your Money Goes (or Doesn't)**\n\n*   **Spending Data:**  The data shows **no expenses** recorded in the last 6 months.\n*   **Spending Efficiency:**  Without spending data, it's impossible to assess spending efficiency.\n*   **Budget Adherence:**  Without a budget or spending data, budget adherence cannot be evaluated.\n\n**Analysis:**  The lack of spending data makes it difficult to understand your financial habits.  It's crucial to track your income and expenses to gain control of your finances.\n\n**Recommendations:**\n\n*   **Track Every Penny:**  Use a budgeting app (Mint, YNAB, Personal Capital) or a spreadsheet to meticulously track all income and expenses for at least one month.\n*   **Create a Budget:**  Based on your tracked spending, create a realistic budget that allocates funds for essential expenses, debt repayment, savings, and discretionary spending.\n*   **Identify Areas for Reduction:**  Once you have a budget, identify areas where you can cut back on spending to free up money for debt repayment and savings.\n\n**3. Goal Progress: Building a Roadmap to Success**\n\n*   **Emergency Fund:** You have **0 months** of living expenses saved in an emergency fund.\n*   **Savings Targets:**  No savings targets are defined.\n*   **Debt Reduction:**  No specific debt reduction plan is in place.\n\n**Analysis:**  You are significantly behind on essential financial goals.  Building an emergency fund and creating a debt reduction plan are critical first steps.\n\n**Recommendations:**\n\n*   **Emergency Fund Goal:**  Set a goal to save 3-6 months of essential living expenses in an easily accessible, high-yield savings account.\n*   **Debt Reduction Goal:**  Define a timeline for paying off your debts, prioritizing high-interest debts.\n*   **Savings Goals:**  Establish specific savings goals for future needs, such as a down payment on a house, retirement, or education.\n\n**4. Financial Health: Assessing Your Current State**\n\n*   **Income vs. Expenses:**  The data shows **no income or expenses**.\n*   **Debt-to-Income Ratio:**  The debt-to-income ratio is **0%** due to the lack of income data.\n*   **Diversification:**  You have **no investments**, so diversification is not applicable.\n\n**Analysis:**  The lack of income is a major concern.  Addressing this is the first step towards improving your financial health.\n\n**Recommendations:**\n\n*   **Increase Income:**  Focus on increasing your income through employment, freelancing, or starting a side business.\n*   **Monitor Debt-to-Income Ratio:**  Once you have income, calculate your debt-to-income ratio and aim to keep it below 36%.\n*   **Diversify Investments:**  \n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at FinanceService.processAIRequest (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:30:107)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async FinanceService.generateProgressReport (webpack-internal:///(rsc)/./src/lib/services/finance.service.ts:276:28)\n    at async FinanceService.handleConversation (webpack-internal:///(rsc)/./src/lib/services/finance.service.ts:248:24)\n    at async FinanceService.processMessage (webpack-internal:///(rsc)/./src/lib/services/finance.service.ts:40:28)\n    at async ConversationalAIService.executeTool (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:218:28)\n    at async ConversationalAIService.handleToolCalls (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:107:28)\n    at async ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:94:29)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:51:20)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:33:01"}
{"error":{"error":{},"userId":"cmdpkupeb0003yu0vvuz6tuwr"},"level":"\u001b[31merror\u001b[39m","message":"AI finance progress report generation failed","timestamp":"23:33:01"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1160,"timestamp":"23:33:01","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:40:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:40:11","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":48,"timestamp":"23:40:19","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:40:32"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am i doing financially","platform":"telegram","timestamp":"23:40:32","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message (attempt 1)","timestamp":"23:40:39","userId":"cmdpkupe"}
{"action":"summary","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Finance message processed successfully","timestamp":"23:40:41","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":911,"timestamp":"23:40:42","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:41:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"whats my progress financially","platform":"telegram","timestamp":"23:41:17","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message (attempt 1)","timestamp":"23:41:23","userId":"cmdpkupe"}
{"action":"summary","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Finance message processed successfully","timestamp":"23:41:25","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":947,"timestamp":"23:41:26","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:41:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"what leads do i have","platform":"telegram","timestamp":"23:41:40","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:41:45","userId":"cmdpkupe"}
{"action":"query","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:41:46","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":136,"timestamp":"23:41:47","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:42:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"clode the lead dandrom guest house","platform":"telegram","timestamp":"23:42:21","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:42:26","userId":"cmdpkupe"}
{"action":"delete","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:42:28","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":44,"timestamp":"23:42:29","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:42:43"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"what leads so i have","platform":"telegram","timestamp":"23:42:43","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:42:48","userId":"cmdpkupe"}
{"action":"query","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:42:50","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":92,"timestamp":"23:42:51","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:43:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"contacted Black Rose Guest House on Mondaly also b","platform":"telegram","timestamp":"23:43:10","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:43:15","userId":"cmdpkupe"}
{"action":"query","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:43:16","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":92,"timestamp":"23:43:17","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:43:28"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"contacted Black Rose Guest House on Monday also bu","platform":"telegram","timestamp":"23:43:28","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:43:34","userId":"cmdpkupe"}
{"action":"conversation","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:43:36","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing ProgressDetection message (attempt 1)","timestamp":"23:43:36","userId":"cmdpkupe"}
{"attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"ProgressDetection message processed successfully","timestamp":"23:43:37","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesProgress message (attempt 1)","timestamp":"23:43:38","userId":"cmdpkupe"}
{"attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesProgress message processed successfully","timestamp":"23:43:42","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1358,"timestamp":"23:43:42","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:44:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"add Black Rose Guest House as a lead, sent them a ","platform":"telegram","timestamp":"23:44:49","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:44:54","userId":"cmdpkupe"}
{"action":"create","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:44:58","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesDuplicateDetection message (attempt 1)","timestamp":"23:45:00","userId":"cmdpkupe"}
{"attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesDuplicateDetection message processed successfully","timestamp":"23:45:00","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":419,"timestamp":"23:45:01","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:45:48"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"show me lead black rose guest house","platform":"telegram","timestamp":"23:45:48","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:45:52","userId":"cmdpkupe"}
{"action":"view","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:45:54","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":214,"timestamp":"23:45:54","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:46:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"lets plan follow in 3 days for black rose guest ho","platform":"telegram","timestamp":"23:46:31","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:46:36","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:46:38","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":451,"timestamp":"23:46:39","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:47:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"choose an appropriate time for follow up for black","platform":"telegram","timestamp":"23:47:40","userId":"69608666"}
{"error":"AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: AI processing failed: Gemini API error: 503 Service Unavailable - {\"error\":{\"code\":503,\"message\":\"The model is overloaded. Please try again later.\",\"status\":\"UNAVAILABLE\"}}\n    at GeminiProvider.handleError (webpack-internal:///(rsc)/./src/lib/ai/providers/base.ts:17:15)\n    at GeminiProvider.generateResponse (webpack-internal:///(rsc)/./src/lib/ai/providers/gemini.ts:54:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:50:32)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:47:46","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":98,"timestamp":"23:47:46","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:47:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"choose an appropriate time for follow up for black","platform":"telegram","timestamp":"23:47:58","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"23:48:05","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"23:48:08","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":474,"timestamp":"23:48:09","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"22:53:05"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"22:53:05","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"22:53:11","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: Hey! Good to see you. I'm your AI business assistant - I can help track your sales pipeline, manage finances, provide sales advice, share financial wisdom, and send you daily updates. What's on your mind today?","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: Failed to extract JSON: Hey! Good to see you. I'm your AI business assistant - I can help track your sales pipeline, manage finances, provide sales advice, share financial wisdom, and send you daily updates. What's on your mind today?\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:51:101)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"22:53:14","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":92,"timestamp":"22:53:15","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:02:29"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:02:29","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:02:37","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: Hey Tapiwa! Good evening. I'm your AI business assistant - ready to help with sales tracking, financial management, or anything else you need. What's on your mind tonight?","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: Failed to extract JSON: Hey Tapiwa! Good evening. I'm your AI business assistant - ready to help with sales tracking, financial management, or anything else you need. What's on your mind tonight?\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:51:101)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:02:39","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":92,"timestamp":"23:02:41","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:04:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:04:06","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:04:11","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: Hey Tapiwa! Good evening. I'm here to assist with your sales pipeline, finances, or anything else you need. What's on your mind tonight?","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: Failed to extract JSON: Hey Tapiwa! Good evening. I'm here to assist with your sales pipeline, finances, or anything else you need. What's on your mind tonight?\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:51:101)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:04:13","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":86,"timestamp":"23:04:14","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:04:44"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:04:44","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:04:48","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: Hey Tapiwa! Good evening. How can I assist you tonight? Whether it's sales, finances, or just a quick chat, I'm here to help!","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: Failed to extract JSON: Hey Tapiwa! Good evening. How can I assist you tonight? Whether it's sales, finances, or just a quick chat, I'm here to help!\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:51:101)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:04:50","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":92,"timestamp":"23:04:52","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:18:16"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:18:16","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:18:23","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: Hey Tapiwa! Good evening. How can I assist you tonight? Whether it's sales, finances, or something else, I'm here to help!","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: Failed to extract JSON: Hey Tapiwa! Good evening. How can I assist you tonight? Whether it's sales, finances, or something else, I'm here to help!\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:51:101)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:18:25","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":82,"timestamp":"23:18:26","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:21:59"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:21:59","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:22:05","userId":"cmdpkupe"}
{"error":"Failed to extract JSON: Hey Tapiwa! Good evening. How can I assist you tonight? Whether it's sales, finances, or something else, I'm here to help!","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"Error: Failed to extract JSON: Hey Tapiwa! Good evening. How can I assist you tonight? Whether it's sales, finances, or something else, I'm here to help!\n    at extractJsonPayload (webpack-internal:///(rsc)/./src/lib/utils/json.ts:8:23)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:51:101)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:22:07","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":101,"timestamp":"23:22:08","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:28:05"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:28:05","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:28:10","userId":"cmdpkupe"}
{"error":"Unexpected token H in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"SyntaxError: Unexpected token H in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:49:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:28:11","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":92,"timestamp":"23:28:13","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:28:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:28:13","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:28:15","userId":"cmdpkupe"}
{"error":"Unexpected token H in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"SyntaxError: Unexpected token H in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:49:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:28:17","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":86,"timestamp":"23:28:18","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:30:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:30:37","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:30:41","userId":"cmdpkupe"}
{"error":"Unexpected token H in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"SyntaxError: Unexpected token H in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:49:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:30:44","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":101,"timestamp":"23:30:45","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:32:36"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:32:36","userId":"69608666"}
{"error":{"error":{},"message":"hi","userId":"cmdpkupeb0003yu0vvuz6tuwr"},"level":"\u001b[31merror\u001b[39m","message":"Context detection failed","timestamp":"23:32:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:32:41","userId":"cmdpkupe"}
{"error":{"error":{},"userId":"cmdpkupe"},"level":"\u001b[31merror\u001b[39m","message":"Context-aware message processing failed, falling back to normal processing","timestamp":"23:32:44"}
{"error":"aiResponse.substring is not a function","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"TypeError: aiResponse.substring is not a function\n    at ConversationalAIService.processNormalMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:113:34)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.processMessageWithContext (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:50:20)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:47:28)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:32:46","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":82,"timestamp":"23:32:47","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:34:23"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:34:23","userId":"69608666"}
{"error":{"error":{},"message":"hi","userId":"cmdpkupeb0003yu0vvuz6tuwr"},"level":"\u001b[31merror\u001b[39m","message":"Context detection failed","timestamp":"23:34:28"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:34:28","userId":"cmdpkupe"}
{"error":{"error":{},"userId":"cmdpkupe"},"level":"\u001b[31merror\u001b[39m","message":"Context-aware message processing failed, falling back to normal processing","timestamp":"23:34:30"}
{"error":"Unexpected token o in JSON at position 1","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"SyntaxError: Unexpected token o in JSON at position 1\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processAIResponse (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:166:35)\n    at ConversationalAIService.processNormalMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:104:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async ConversationalAIService.processMessageWithContext (webpack-internal:///(rsc)/./src/lib/services/base-ai.service.ts:50:20)\n    at async ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:47:28)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:34:32","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":88,"timestamp":"23:34:34","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:45:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:45:17","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:45:24","userId":"cmdpkupe"}
{"error":"Unexpected token H in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"SyntaxError: Unexpected token H in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:49:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:45:25","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":86,"timestamp":"23:45:27","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"23:49:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"23:49:13","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"23:49:18","userId":"cmdpkupe"}
{"error":"Unexpected token H in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"SyntaxError: Unexpected token H in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:49:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"23:49:20","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":101,"timestamp":"23:49:21","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:11:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"00:11:25","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:11:34","userId":"cmdpkupe"}
{"error":"Unexpected token H in JSON at position 0","level":"\u001b[31merror\u001b[39m","message":"Conversational AI error","stack":"SyntaxError: Unexpected token H in JSON at position 0\n    at JSON.parse (<anonymous>)\n    at ConversationalAIService.processMessage (webpack-internal:///(rsc)/./src/lib/services/conversational-ai.service.ts:52:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MessageRouterService.processMessage (webpack-internal:///(rsc)/./src/lib/services/message-router.service.ts:41:30)\n    at async POST (webpack-internal:///(rsc)/./src/app/api/webhooks/telegram/route.ts:22:9)\n    at async AppRouteRouteModule.do (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45984)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:183647)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Ftelegram%2Froute&page=%2Fapi%2Fwebhooks%2Ftelegram%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Ftelegram%2Froute.ts&appDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fiam%2FProjects%2FPersonal%2Fai-personal-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async doRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1586:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1928:13)\n    at async DevServer.renderPageComponent (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2394:24)\n    at async DevServer.renderToResponseImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:2434:32)\n    at async DevServer.pipeImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:1034:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/base-server.js:925:17)\n    at async /home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:398:20\n    at async Span.traceAsyncFn (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/dev/next-dev-server.js:394:24)\n    at async invokeRender (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:239:21)\n    at async handleRequest (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:436:24)\n    at async requestHandlerImpl (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/router-server.js:464:13)\n    at async Server.requestListener (/home/iam/Projects/Personal/ai-personal-assistant/node_modules/next/dist/server/lib/start-server.js:218:13)","timestamp":"00:11:36","userId":"cmdpkupeb0003yu0vvuz6tuwr"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":82,"timestamp":"00:11:37","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:20:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"hi","platform":"telegram","timestamp":"00:20:02","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:20:06","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":125,"timestamp":"00:20:10","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:20:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"how am doing in sales","platform":"telegram","timestamp":"00:20:25","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:20:28","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:20:32","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"00:20:33","userId":"cmdpkupe"}
{"action":"summary","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"00:20:36","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":167,"timestamp":"00:20:38","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:25:45"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Contacted Lethabo Lifestyle Guest House, he respon","platform":"telegram","timestamp":"00:25:45","userId":"69608666"}
{"entityName":"Lethabo Lifestyle Guest House","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:25:50","userId":"cmdpkupe"}
{"entityName":"Lethabo Lifestyle Guest House","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:25:54","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesWithContext message (attempt 1)","timestamp":"00:25:56","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesWithContext message processed successfully","timestamp":"00:26:01","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":781,"timestamp":"00:26:03","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:26:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Show me Lethabo","platform":"telegram","timestamp":"00:26:58","userId":"69608666"}
{"entityName":"Lethabo","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:27:02","userId":"cmdpkupe"}
{"entityName":"Lethabo","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:27:06","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesWithContext message (attempt 1)","timestamp":"00:27:08","userId":"cmdpkupe"}
{"action":"view","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesWithContext message processed successfully","timestamp":"00:27:11","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":634,"timestamp":"00:27:12","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:29:33"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Also my friend also Oscar referred to Charlie Nhla","platform":"telegram","timestamp":"00:29:33","userId":"69608666"}
{"entityName":"Charlie Nhlabathi","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:29:37","userId":"cmdpkupe"}
{"entityName":"Charlie Nhlabathi","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:29:41","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesWithContext message (attempt 1)","timestamp":"00:29:42","userId":"cmdpkupe"}
{"action":"create","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesWithContext message processed successfully","timestamp":"00:29:46","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesDuplicateDetection message (attempt 1)","timestamp":"00:29:47","userId":"cmdpkupe"}
{"attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesDuplicateDetection message processed successfully","timestamp":"00:29:48","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":836,"timestamp":"00:29:49","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:30:44"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Actually remind me to follow him up tomorrow inste","platform":"telegram","timestamp":"00:30:44","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:30:49","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:30:52","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"00:30:53","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"00:30:57","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":769,"timestamp":"00:30:58","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:31:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Oh sorry I meant today thought its still Thursday","platform":"telegram","timestamp":"00:31:21","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:31:24","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":144,"timestamp":"00:31:26","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:31:47"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I want to follow up on Charlie tomorrow","platform":"telegram","timestamp":"00:31:47","userId":"69608666"}
{"entityName":"Charlie","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:31:52","userId":"cmdpkupe"}
{"entityName":"Charlie","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:31:55","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesWithContext message (attempt 1)","timestamp":"00:31:57","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesWithContext message processed successfully","timestamp":"00:32:01","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":786,"timestamp":"00:32:02","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:32:45"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Sorry I mean I want to follow on Charlie today , w","platform":"telegram","timestamp":"00:32:45","userId":"69608666"}
{"entityName":"Charlie","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:32:49","userId":"cmdpkupe"}
{"entityName":"Charlie","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:32:54","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesWithContext message (attempt 1)","timestamp":"00:32:54","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesWithContext message processed successfully","timestamp":"00:32:58","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":800,"timestamp":"00:33:00","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:33:30"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Awesome so what do I have for today","platform":"telegram","timestamp":"00:33:30","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:33:33","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:33:36","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Sales message (attempt 1)","timestamp":"00:33:37","userId":"cmdpkupe"}
{"action":"query","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Sales message processed successfully","timestamp":"00:33:38","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":429,"timestamp":"00:33:39","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:36:45"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"M4m said the link to summit lodge I showed him was","platform":"telegram","timestamp":"00:36:45","userId":"69608666"}
{"entityName":"M4m","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:36:49","userId":"cmdpkupe"}
{"entityName":"M4m","entityType":"lead","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:36:53","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing SalesWithContext message (attempt 1)","timestamp":"00:36:54","userId":"cmdpkupe"}
{"action":"update","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"SalesWithContext message processed successfully","timestamp":"00:36:58","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":860,"timestamp":"00:37:00","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:38:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Thanks how am I doing financially","platform":"telegram","timestamp":"00:38:04","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:38:07","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:38:10","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message (attempt 1)","timestamp":"00:38:11","userId":"cmdpkupe"}
{"action":"summary","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Finance message processed successfully","timestamp":"00:38:14","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1113,"timestamp":"00:38:17","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:40:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"I also have a temporary loan from fnb its 1839 I ","platform":"telegram","timestamp":"00:40:42","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:40:45","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:40:48","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message (attempt 1)","timestamp":"00:40:49","userId":"cmdpkupe"}
{"action":"update_account","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Finance message processed successfully","timestamp":"00:40:53","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":901,"timestamp":"00:40:54","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:41:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"How many loans do I have","platform":"telegram","timestamp":"00:41:26","userId":"69608666"}
{"entityName":"","entityType":"account","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:41:30","userId":"cmdpkupe"}
{"entityName":"","entityType":"account","level":"\u001b[32minfo\u001b[39m","message":"Context detected and retrieved","timestamp":"00:41:33","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing FinanceWithContext message (attempt 1)","timestamp":"00:41:34","userId":"cmdpkupe"}
{"action":"summary","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"FinanceWithContext message processed successfully","timestamp":"00:41:37","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":884,"timestamp":"00:41:38","userId":"cmdpkupe"}
{"hasMessage":true,"level":"\u001b[32minfo\u001b[39m","message":"Telegram webhook received","messageType":"text","timestamp":"00:43:32"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing message","messagePreview":"Wondering my friend can lend me money like 200 whe","platform":"telegram","timestamp":"00:43:32","userId":"69608666"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:43:36","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"No entity context needed, processing normally","timestamp":"00:43:39","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing Finance message (attempt 1)","timestamp":"00:43:40","userId":"cmdpkupe"}
{"action":"conversation","attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"Finance message processed successfully","timestamp":"00:43:43","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Processing FinanceProgressDetection message (attempt 1)","timestamp":"00:43:43","userId":"cmdpkupe"}
{"attempt":1,"level":"\u001b[32minfo\u001b[39m","message":"FinanceProgressDetection message processed successfully","timestamp":"00:43:45","userId":"cmdpkupe"}
{"level":"\u001b[32minfo\u001b[39m","message":"Message processed successfully","responseLength":1017,"timestamp":"00:43:46","userId":"cmdpkupe"}
